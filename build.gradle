plugins {
  id 'eu.appsatori.fatjar' version '0.3'
}

apply plugin: 'java'
apply plugin: 'eu.appsatori.fatjar'
apply plugin: 'eclipse'

sourceCompatibility = 1.6
targetCompatibility = 1.6
version = "1.0"

fatJar {
    archiveName = 'wiremock-velocity-transformer-standalone-' + fatJar.version + '.jar'
    manifest {
        attributes "Implementation-Title"   : "wiremock-velocity-transformer-standalone",
                   "Implementation-Version" : version
    }
}

jar {
    dependsOn fatJar
    archiveName = 'wiremock-velocity-transformer-' + jar.version + '.jar'
    manifest {
        attributes "Implementation-Title"   : "wiremock-velocity-transformer",
                   "Implementation-Version" : version
    }
}

repositories {
    mavenCentral()
}

dependencies {
    compile         group: "org.apache.velocity",           name: "velocity",             version: "1.7"
    compile         group: "com.github.tomakehurst",        name: "wiremock",             version: "1.53"
    compile         group: "org.mortbay.jetty",             name: "jetty",                version: "6.1.26"
    compile         group: "com.google.guava",              name: "guava",                version: "18.0"
    compile         group: "com.fasterxml.jackson.core",    name: "jackson-core",         version: "2.4.2"
    compile         group: "com.fasterxml.jackson.core",    name: "jackson-annotations",  version: "2.4.2"
    compile         group: "com.fasterxml.jackson.core",    name: "jackson-databind",     version: "2.4.2"
    compile         group: "org.apache.httpcomponents",     name: "httpclient",           version: "4.3.5"
    compile         group: "org.skyscreamer",               name: "jsonassert",           version: "1.2.3"
    compile         group: "xmlunit",                       name: "xmlunit",              version: "1.5"
    compile         group: "com.jayway.jsonpath",           name: "json-path",            version: "0.8.1"
    compile         group: "org.slf4j",                     name: "slf4j-api",            version: "1.7.6"
    compile         group: "net.sf.jopt-simple",            name: "jopt-simple",          version: "4.7"
    compile ("junit:junit:4.11") {
        exclude group: "org.hamcrest", module: "hamcrest-core"
    }    
    testCompile "org.hamcrest:hamcrest-all:1.3"
    testCompile ("org.jmock:jmock:2.5.1") {
        exclude group: "junit", module: "junit-dep"
        exclude group: "org.hamcrest", module: "hamcrest-core"
        exclude group: "org.hamcrest", module: "hamcrest-library"
    }
    testCompile ("org.jmock:jmock-junit4:2.5.1") {
        exclude group: "junit", module: "junit-dep"
        exclude group: "org.hamcrest", module: "hamcrest-core"
        exclude group: "org.hamcrest", module: "hamcrest-library"
    }
    testCompile "net.sf.json-lib:json-lib:2.4:jdk15"
    testCompile "com.googlecode.jarjar:jarjar:1.3"
    testCompile "commons-io:commons-io:2.4"
}